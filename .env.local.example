# AIForge - Supabase configuration
# Copy this file to .env.local and fill in your Supabase project values.
# Get these from: https://supabase.com/dashboard/project/_/settings/api
#
# For sign-up with email confirmation:
# 1. Go to Authentication > URL Configuration
# 2. Add http://localhost:3000/auth/callback to Redirect URLs
# 3. Set Site URL to http://localhost:3000 (or your app URL)
#
# For easier local dev: Authentication > Providers > Email > disable "Confirm email"
#
# Required for encrypted API key storage (min 16 chars):
ENCRYPTION_KEY=your-random-secret-at-least-16-chars

NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Optional: for "Connect GitHub" (Settings) and creating workspaces from your private repos.
# Create an OAuth App at: https://github.com/settings/developers
# Callback URL: http://localhost:3000/api/auth/github/callback (or your app URL + /api/auth/github/callback)
# GITHUB_CLIENT_ID=
# GITHUB_CLIENT_SECRET=

# Optional: dev auth bypass for scripting Agent APIs (plan-stream, execute-stream, debug-from-log).
# Only active when NODE_ENV=development. Pass X-Dev-Token header to authenticate.
# DEV_TEST_TOKEN=your-secret-token
# DEV_TEST_USER_ID=<supabase-user-id>  # e.g. owner of your test workspace (from auth.users)
# DEV_OPENROUTER_API_KEY=<key>  # When dev bypass has no keys in DB, use this for OpenRouter (plan/execute/debug)

# Optional: E2E tests (npx playwright test e2e/full-e2e-report.spec.ts)
# E2E_USER_EMAIL=your-test-user@example.com
# E2E_USER_PASSWORD=your-password
# E2E_OPENROUTER_KEY=sk-or-...  # optional - adds key in Settings if not already saved

# Optional: Admin users for /api/debug/* (comma-separated Supabase user IDs)
# ADMIN_USER_IDS=uuid1,uuid2

# Optional: Redis for rate limiting (in-memory fallback when unset)
# REDIS_URL=redis://localhost:6379

# Optional: Per-user daily token budget (Phase 4.2.1). Default 100000.
# TOKEN_BUDGET_DAILY_PER_USER=100000

# Optional: Per-workspace daily token limit (Phase 4.2.3). Default 50000.
# TOKEN_BUDGET_WORKSPACE_DAILY=50000

# Optional: Sentry DSN for error tracking (Phase 4.3.5). Install @sentry/nextjs when using.
# SENTRY_DSN=https://...@sentry.io/...

# Optional: CI token for /api/ci/propose-fixes (Bearer token auth)
# CODE_COMPASS_CI_TOKEN=your-ci-secret-token

#
# SECRETS CHECKLIST (never commit these to git):
# [ ] ENCRYPTION_KEY - min 16 chars, used for encrypting provider keys
# [ ] GITHUB_CLIENT_SECRET - if using GitHub OAuth
# [ ] DEV_TEST_TOKEN - dev only, for X-Dev-Token bypass
# [ ] CODE_COMPASS_CI_TOKEN - if using CI endpoint
# [ ] Provider API keys - stored in DB (provider_keys), never in env for production
